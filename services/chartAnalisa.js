// services/chartAnalisa.js
// Versi sementara: kembalikan gambar placeholder saja

async function generateCandlestickChart(symbol = "BBCA.JK") {
  console.log(`ðŸ§ª [TEST] Mengembalikan placeholder untuk: ${symbol}`);

  // Buat buffer PNG 1x1 pixel transparan (minimal valid PNG)
  // Data ini adalah header PNG minimal + 1 pixel transparan
  const emptyPngBuffer = Buffer.from([
    0x89,
    0x50,
    0x4e,
    0x47,
    0x0d,
    0x0a,
    0x1a,
    0x0a, // PNG header
    0x00,
    0x00,
    0x00,
    0x0d, // IHDR chunk length
    0x49,
    0x48,
    0x44,
    0x52, // IHDR
    0x00,
    0x00,
    0x00,
    0x01, // width: 1
    0x00,
    0x00,
    0x00,
    0x01, // height: 1
    0x08, // bit depth
    0x06, // color type (RGBA)
    0x00,
    0x00,
    0x00, // compression, filter, interlace
    0x00,
    0x00,
    0x00,
    0x0c, // IDAT chunk length
    0x49,
    0x44,
    0x41,
    0x54, // IDAT
    0x78,
    0x9c,
    0x62,
    0x60,
    0x00,
    0x00,
    0x00,
    0xff,
    0xff,
    0x03,
    0x00,
    0x00,
    0x06,
    0x00,
    0x05,
    0x00,
    0x00,
    0x00,
    0x00,
    0x49,
    0x45,
    0x4e,
    0x44,
    0xae,
    0x42,
    0x60,
    0x82, // IEND
  ]);

  return emptyPngBuffer;
}

module.exports = { generateCandlestickChart };
